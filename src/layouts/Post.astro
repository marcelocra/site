---
import { getCollection } from 'astro:content'
import Post from './Post.astro'

export async function getStaticPaths() {
  const blogEntries = await getCollection('posts')
  return blogEntries.map((entry) => ({
    params: { slug: entry.slug },
    props: { entry },
  }))
}

const { entry } = Astro.props
const { Content } = await entry.render()
---

<Site>
  <div slot="main">
    <article>
      {heroImage && <img width={720} height={360} src={heroImage} alt="" />}
      <h1 class="text-3xl my-1">{title}</h1>
      {
        pubDateAsDate && (
          <span class="text-sm text-gray-500">
            Publicado: <time>{pubDateAsDate}</time>{' '}
            {updatedDateAsDate && (
              <span>
                <i>
                  (Atualizado: <time>{updatedDateAsDate}</time>)
                </i>
              </span>
            )}
          </span>
        )
      }

      <slot />
    </article>
  </div>
</Site>
